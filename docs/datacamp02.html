<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Intermediate R</title>

<script src="site_libs/header-attrs-2.20/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/darkly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Arthur Boari</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-code"></span>
     
    My codes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">R</li>
    <li>
      <a href="Simple_maps.html">Basic ggplot2 maps + geobr</a>
    </li>
    <li class="dropdown-header">Dashboards</li>
    <li>
      <a href="TSdashboard.html">Taylor Swift Spotify Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-file-text-o"></span>
     
    My annotations
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">R</li>
    <li>
      <a href="datacamp01.html">01: Introduction to R</a>
    </li>
    <li>
      <a href="datacamp02.html">02: Intermediate R</a>
    </li>
    <li>
      <a href="datacamp03.html">03: Introduction to the Tidyverse</a>
    </li>
    <li>
      <a href="datacamp04.html">04: Data Manipulation with dplyr</a>
    </li>
    <li>
      <a href="datacamp05.html">05: Joining Data with dplyr</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-language"></span>
     
    Language
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://arthurboari.github.io/portfolio_en/">EN-US</a>
    </li>
    <li>
      <a href="https://arthurboari.github.io/portfolio_pt/">PT-BR</a>
    </li>
  </ul>
</li>
<li>
  <a href="mailto:eng.arthurboari@gmail.com">
    <span class="fa fa-envelope"></span>
     
    Contact
  </a>
</li>
<li>
  <a href="https://linktr.ee/aboari">
    <span class="fa fa-link"></span>
     
    Links
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Intermediate R</h1>

</div>


<div id="conditionals-and-control-flow" class="section level1"
number="1">
<h1><span class="header-section-number">1</span> Conditionals and
Control Flow</h1>
<div id="relational-operators" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Relational
Operators</h2>
<ul>
<li>Equality <code>==</code></li>
<li>Inequality <code>!=</code></li>
<li><code>&lt;</code> and <code>&gt;</code></li>
<li><code>&lt;=</code> and <code>&gt;=</code></li>
</ul>
<pre class="r"><code># Comparison of logicals
TRUE == FALSE</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="r"><code># Comparison of numerics
-6 * 14 != 17 - 101</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="r"><code># Comparison of character strings
&quot;useR&quot; == &quot;user&quot;</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="r"><code># Compare a logical with a numeric
TRUE == 1</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code># Comparison of numerics
-6 * 5 + 2 &gt;= -10 + 1</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="r"><code># Comparison of character strings
&quot;raining&quot; &lt;= &quot;raining dogs&quot;</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code># Comparison of logicals
TRUE &gt; FALSE</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code># The linkedin and facebook vectors have already been created for you
linkedin &lt;- c(16, 9, 13, 5, 2, 17, 14)
facebook &lt;- c(17, 7, 5, 16, 8, 13, 14)

# Popular days
linkedin &gt; 15</code></pre>
<pre><code>## [1]  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE</code></pre>
<pre class="r"><code># Quiet days
linkedin &lt;= 5</code></pre>
<pre><code>## [1] FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE</code></pre>
<pre class="r"><code># LinkedIn more popular than Facebook
linkedin &gt; facebook</code></pre>
<pre><code>## [1] FALSE  TRUE  TRUE FALSE FALSE  TRUE FALSE</code></pre>
<pre class="r"><code>views &lt;- matrix(c(linkedin, facebook), nrow = 2, byrow = TRUE)

# When does views equal 13?
views == 13</code></pre>
<pre><code>##       [,1]  [,2]  [,3]  [,4]  [,5]  [,6]  [,7]
## [1,] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
## [2,] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE</code></pre>
<pre class="r"><code># When is views less than or equal to 14?
views &lt;= 14</code></pre>
<pre><code>##       [,1] [,2] [,3]  [,4] [,5]  [,6] [,7]
## [1,] FALSE TRUE TRUE  TRUE TRUE FALSE TRUE
## [2,] FALSE TRUE TRUE FALSE TRUE  TRUE TRUE</code></pre>
</div>
<div id="logical-operators" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Logical
Operators</h2>
<ul>
<li>AND operator “&amp;”</li>
<li>OR operator “|”</li>
<li>NOT operator “!”</li>
<li>“&amp;” vs “&amp;&amp;”, “|” vs “||” (the double ampersand operation
only examines the first element of each vector.)</li>
</ul>
<pre class="r"><code># The linkedin and last variable are already defined for you
linkedin &lt;- c(16, 9, 13, 5, 2, 17, 14)
last &lt;- tail(linkedin, 1)

# Is last under 5 or above 10?
last &lt;5 | last &gt;10</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code># Is last between 15 (exclusive) and 20 (inclusive)?
last &gt; 15 &amp; last &lt;=20</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="r"><code># linkedin exceeds 10 but facebook below 10
linkedin &gt; 10 &amp; facebook &lt; 10</code></pre>
<pre><code>## [1] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE</code></pre>
<pre class="r"><code># When were one or both visited at least 12 times?
linkedin &gt;= 12 | facebook &gt;=12</code></pre>
<pre><code>## [1]  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE</code></pre>
<pre class="r"><code># When is views between 11 (exclusive) and 14 (inclusive)?
views &gt; 11 &amp; views &lt;= 14</code></pre>
<pre><code>##       [,1]  [,2]  [,3]  [,4]  [,5]  [,6] [,7]
## [1,] FALSE FALSE  TRUE FALSE FALSE FALSE TRUE
## [2,] FALSE FALSE FALSE FALSE FALSE  TRUE TRUE</code></pre>
</div>
<div id="conditional-statements" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Conditional
Statements</h2>
<blockquote>
<p>if (condition) { expr }</p>
</blockquote>
<blockquote>
<p>if (condition) { expr1 } else { expr2 }</p>
</blockquote>
<pre class="r"><code># Variables related to your last day of recordings
li &lt;- 15
fb &lt;- 9

# Code the control-flow construct
if (li &gt;= 15 &amp; fb &gt;= 15) {
  sms &lt;- 2 * (li + fb)
} else if (li &lt; 10 &amp; fb &lt; 10) {
  sms &lt;- 0.5 * (li + fb)
} else {
  sms &lt;- li + fb
}

# Print the resulting sms to the console
sms</code></pre>
<pre><code>## [1] 24</code></pre>
</div>
</div>
<div id="loops" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Loops</h1>
<div id="while-loop" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> While loop</h2>
<blockquote>
<p>while (condition) { expr }</p>
</blockquote>
<p>Remember that the condition part of this recipe should become FALSE
at some point during the execution. Otherwise, the while loop will go on
indefinitely.</p>
<pre class="r"><code># Initialize the speed variable
speed &lt;- 64

# Code the while loop
while (speed &gt; 30) {
  print(&quot;Slow down!&quot;)
  speed &lt;- speed -7
}</code></pre>
<pre><code>## [1] &quot;Slow down!&quot;
## [1] &quot;Slow down!&quot;
## [1] &quot;Slow down!&quot;
## [1] &quot;Slow down!&quot;
## [1] &quot;Slow down!&quot;</code></pre>
<pre class="r"><code># Print out the speed variable
speed</code></pre>
<pre><code>## [1] 29</code></pre>
<pre class="r"><code># Initialize the speed variable
speed &lt;- 64

# Extend/adapt the while loop
while (speed &gt; 30) {
  print(paste(&quot;Your speed is&quot;,speed))
  if ( speed &gt; 48) {
    print(&quot;Slow down big time!&quot;)
    speed &lt;- speed -11
  } else {
    print(&quot;Slow down!&quot;)
    speed &lt;- speed -6
  }
}</code></pre>
<pre><code>## [1] &quot;Your speed is 64&quot;
## [1] &quot;Slow down big time!&quot;
## [1] &quot;Your speed is 53&quot;
## [1] &quot;Slow down big time!&quot;
## [1] &quot;Your speed is 42&quot;
## [1] &quot;Slow down!&quot;
## [1] &quot;Your speed is 36&quot;
## [1] &quot;Slow down!&quot;</code></pre>
<pre class="r"><code># Initialize the speed variable
speed &lt;- 88

while (speed &gt; 30) {
  print(paste(&quot;Your speed is&quot;, speed))
  
  # Break the while loop when speed exceeds 80
  if (speed &gt; 80) {
    break
  }
  
  if (speed &gt; 48) {
    print(&quot;Slow down big time!&quot;)
    speed &lt;- speed - 11
  } else {
    print(&quot;Slow down!&quot;)
    speed &lt;- speed - 6
  }
}</code></pre>
<pre><code>## [1] &quot;Your speed is 88&quot;</code></pre>
<pre class="r"><code># Initialize i as 1 
i &lt;- 1

# Code the while loop
while (i &lt;= 10) {
  print(3*i)
  if (3*i %% 8 == 0) {
    break
  }
  i &lt;- i + 1
}</code></pre>
<pre><code>## [1] 3
## [1] 6
## [1] 9
## [1] 12
## [1] 15
## [1] 18
## [1] 21
## [1] 24</code></pre>
</div>
<div id="for-loop" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> For loop</h2>
<pre class="r"><code>primes &lt;- c(2, 3, 5, 7, 11, 13)

# loop version 1
for (p in primes) {
  print(p)
}</code></pre>
<pre><code>## [1] 2
## [1] 3
## [1] 5
## [1] 7
## [1] 11
## [1] 13</code></pre>
<pre class="r"><code># loop version 2
for (i in 1:length(primes)) {
  print(primes[i])
}</code></pre>
<pre><code>## [1] 2
## [1] 3
## [1] 5
## [1] 7
## [1] 11
## [1] 13</code></pre>
<pre class="r"><code># The nyc list is already specified
nyc &lt;- list(pop = 8405837, 
            boroughs = c(&quot;Manhattan&quot;, &quot;Bronx&quot;, &quot;Brooklyn&quot;, &quot;Queens&quot;, &quot;Staten Island&quot;), 
            capital = FALSE)

# Loop version 1
for (p in nyc) {
    print(p)
}</code></pre>
<pre><code>## [1] 8405837
## [1] &quot;Manhattan&quot;     &quot;Bronx&quot;         &quot;Brooklyn&quot;      &quot;Queens&quot;       
## [5] &quot;Staten Island&quot;
## [1] FALSE</code></pre>
<pre class="r"><code># Loop version 2
for(p in 1:length(nyc)){
    print(nyc[[p]])
}</code></pre>
<pre><code>## [1] 8405837
## [1] &quot;Manhattan&quot;     &quot;Bronx&quot;         &quot;Brooklyn&quot;      &quot;Queens&quot;       
## [5] &quot;Staten Island&quot;
## [1] FALSE</code></pre>
<pre class="r"><code># The tic-tac-toe matrix ttt has already been defined for you
ttt &lt;- matrix(c(&quot;O&quot;,NA,&quot;X&quot;,NA,&quot;O&quot;,&quot;O&quot;,&quot;X&quot;,NA,&quot;X&quot;),byrow=TRUE,nrow = 3)

# define the double for loop
for (i in 1:nrow(ttt)) {
  for (j in 1:ncol(ttt)) {
    print(paste(&quot;On row&quot;, i, &quot;and column&quot;, j, &quot;the board contains&quot;, ttt[i,j]))
  }
}</code></pre>
<pre><code>## [1] &quot;On row 1 and column 1 the board contains O&quot;
## [1] &quot;On row 1 and column 2 the board contains NA&quot;
## [1] &quot;On row 1 and column 3 the board contains X&quot;
## [1] &quot;On row 2 and column 1 the board contains NA&quot;
## [1] &quot;On row 2 and column 2 the board contains O&quot;
## [1] &quot;On row 2 and column 3 the board contains O&quot;
## [1] &quot;On row 3 and column 1 the board contains X&quot;
## [1] &quot;On row 3 and column 2 the board contains NA&quot;
## [1] &quot;On row 3 and column 3 the board contains X&quot;</code></pre>
<pre class="r"><code># The linkedin vector has already been defined for you
linkedin &lt;- c(16, 9, 13, 5, 2, 17, 14)

# Code the for loop with conditionals
for (li in linkedin) {
  if (li &gt;10) {
    print(&quot;You&#39;re popular!&quot;)
  } else {
    print(&quot;Be more visible!&quot;)
  }
  print(li)
}</code></pre>
<pre><code>## [1] &quot;You&#39;re popular!&quot;
## [1] 16
## [1] &quot;Be more visible!&quot;
## [1] 9
## [1] &quot;You&#39;re popular!&quot;
## [1] 13
## [1] &quot;Be more visible!&quot;
## [1] 5
## [1] &quot;Be more visible!&quot;
## [1] 2
## [1] &quot;You&#39;re popular!&quot;
## [1] 17
## [1] &quot;You&#39;re popular!&quot;
## [1] 14</code></pre>
<pre class="r"><code># The linkedin vector has already been defined for you
linkedin &lt;- c(16, 9, 13, 5, 2, 17, 14)

# Adapt/extend the for loop
for (li in linkedin) {
  if (li &gt; 10) {
    print(&quot;You&#39;re popular!&quot;)
  } else {
    print(&quot;Be more visible!&quot;)
  }
  
  # Add if statement with break
  if(li &gt; 16){
    print(&quot;This is ridiculous, I&#39;m outta here!&quot;)
    break
  } 
  
  # Add if statement with next
  if(li &lt;5){
    print(&quot;This is too embarrassing!&quot;)
    next
  } 
  
  print(li)
}</code></pre>
<pre><code>## [1] &quot;You&#39;re popular!&quot;
## [1] 16
## [1] &quot;Be more visible!&quot;
## [1] 9
## [1] &quot;You&#39;re popular!&quot;
## [1] 13
## [1] &quot;Be more visible!&quot;
## [1] 5
## [1] &quot;Be more visible!&quot;
## [1] &quot;This is too embarrassing!&quot;
## [1] &quot;You&#39;re popular!&quot;
## [1] &quot;This is ridiculous, I&#39;m outta here!&quot;</code></pre>
<pre class="r"><code># Pre-defined variables
rquote &lt;- &quot;r&#39;s internals are irrefutably intriguing&quot;
chars &lt;- strsplit(rquote, split = &quot;&quot;)[[1]]

# Initialize rcount
rcount &lt;- 0

# Finish the for loop
for (char in chars) {
  if(char == &quot;r&quot;){
      rcount &lt;- rcount +1
  }
  if(char == &quot;u&quot;){
      break
  }
  
}

# Print out rcount
print(rcount)</code></pre>
<pre><code>## [1] 5</code></pre>
</div>
</div>
<div id="functions" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Functions</h1>
<div id="introduction-to-functions" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Introduction to
Functions</h2>
<pre class="r"><code>args(mean)</code></pre>
<pre><code>## function (x, ...) 
## NULL</code></pre>
<pre class="r"><code># The linkedin and facebook vectors have already been created for you
linkedin &lt;- c(16, 9, 13, 5, 2, 17, 14)
facebook &lt;- c(17, 7, 5, 16, 8, 13, 14)

# Calculate the mean of the sum
avg_sum &lt;- mean(x = linkedin+facebook)

# Calculate the trimmed mean of the sum
avg_sum_trimmed &lt;- mean(x = linkedin+facebook,trim = 0.2)

# Inspect both new variables
avg_sum</code></pre>
<pre><code>## [1] 22.28571</code></pre>
<pre class="r"><code>avg_sum_trimmed</code></pre>
<pre><code>## [1] 22.6</code></pre>
</div>
<div id="writing-your-own-functions" class="section level2"
number="3.2">
<h2><span class="header-section-number">3.2</span> Writing your own
functions</h2>
<pre class="r"><code># Create a function pow_two()
pow_two &lt;- function(x){
    return(x*x)
}


# Use the function
pow_two(12)</code></pre>
<pre><code>## [1] 144</code></pre>
<pre class="r"><code># Create a function sum_abs()
sum_abs &lt;- function(x,y){
    return(abs(x)+abs(y))
}


# Use the function
sum_abs(-2,3)</code></pre>
<pre><code>## [1] 5</code></pre>
</div>
<div id="r-packages" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> R Packages</h2>
<pre class="r"><code># Load the ggplot2 package
library(ggplot2)

# Retry the qplot() function
qplot(mtcars$wt, mtcars$hp)</code></pre>
<pre><code>## Warning: `qplot()` was deprecated in ggplot2 3.4.0.
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_lifecycle_warnings()` to see
## where this warning was generated.</code></pre>
<p><img src="datacamp02_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<pre class="r"><code># Check out the currently attached packages again
search()</code></pre>
<pre><code>##  [1] &quot;.GlobalEnv&quot;        &quot;package:ggplot2&quot;   &quot;package:stats&quot;    
##  [4] &quot;package:graphics&quot;  &quot;package:grDevices&quot; &quot;package:utils&quot;    
##  [7] &quot;package:datasets&quot;  &quot;package:methods&quot;   &quot;Autoloads&quot;        
## [10] &quot;package:base&quot;</code></pre>
</div>
</div>
<div id="the-apply-family" class="section level1" number="4">
<h1><span class="header-section-number">4</span> The apply family</h1>
<div id="lapply" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> lapply</h2>
<blockquote>
<p>lapply(X, FUN, …)</p>
</blockquote>
<pre class="r"><code>lapply(nyc, class)</code></pre>
<pre><code>## $pop
## [1] &quot;numeric&quot;
## 
## $boroughs
## [1] &quot;character&quot;
## 
## $capital
## [1] &quot;logical&quot;</code></pre>
<pre class="r"><code>unlist(lapply(nyc, class))</code></pre>
<pre><code>##         pop    boroughs     capital 
##   &quot;numeric&quot; &quot;character&quot;   &quot;logical&quot;</code></pre>
<p>To put it generally, lapply takes a vector or list X, and applies the
function FUN to each of its members. If FUN requires additional
arguments, you pass them after you’ve specified X and FUN (…). The
output of lapply() is a list, the same length as X, where each element
is the result of applying FUN on the corresponding element of X.</p>
<pre class="r"><code># The vector pioneers has already been created for you
pioneers &lt;- c(&quot;GAUSS:1777&quot;, &quot;BAYES:1702&quot;, &quot;PASCAL:1623&quot;, &quot;PEARSON:1857&quot;)

# Split names from birth year
split_math &lt;- strsplit(pioneers, split = &quot;:&quot;)

# Convert to lowercase strings: split_low
split_low &lt;- lapply(split_math, tolower)

# Take a look at the structure of split_low
str(split_low)</code></pre>
<pre><code>## List of 4
##  $ : chr [1:2] &quot;gauss&quot; &quot;1777&quot;
##  $ : chr [1:2] &quot;bayes&quot; &quot;1702&quot;
##  $ : chr [1:2] &quot;pascal&quot; &quot;1623&quot;
##  $ : chr [1:2] &quot;pearson&quot; &quot;1857&quot;</code></pre>
<pre class="r"><code># Write function select_first()
select_first &lt;- function(x) {
  x[1]
}

# Apply select_first() over split_low: names
names &lt;- lapply(split_low, select_first)

# Write function select_second()
select_second &lt;- function(x) {
  x[2]
}

years &lt;- lapply(split_low, function(x) {x[2]})

# Apply select_second() over split_low: years
years &lt;- lapply(split_low, select_second)

# Generic select function
select_el &lt;- function(x, index) {
  x[index]
}

# Use lapply() twice on split_low: names and years
names &lt;- lapply(split_low,select_el, index = 1)
years &lt;- lapply(split_low,select_el, index = 2)</code></pre>
</div>
<div id="sapply" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> sapply</h2>
<pre class="r"><code>cities &lt;- c(&quot;New York&quot;,&quot;Paris&quot;,&quot;London&quot;,&quot;Tokyo&quot;)
unlist(lapply(cities, nchar))</code></pre>
<pre><code>## [1] 8 5 6 5</code></pre>
<pre class="r"><code>sapply(cities, nchar)</code></pre>
<pre><code>## New York    Paris   London    Tokyo 
##        8        5        6        5</code></pre>
<pre class="r"><code>sapply(cities, nchar, USE.NAMES = FALSE)</code></pre>
<pre><code>## [1] 8 5 6 5</code></pre>
<p>sapply calls lapply to apply the nchar function over each element of
the cities vector, and then uses the simplify2array function to convert
that list lapply generated to an array. In our case, sapply managed to
convert the result to a one dimensional array, which is a vector.</p>
<pre class="r"><code>first_and_last &lt;- function(name) {
  name &lt;- gsub(&quot; &quot;,&quot;&quot;,name)
  letters2 &lt;- strsplit(name, split = &quot;&quot;)[[1]]
  c(first = min(letters2),last=max(letters2))
}
sapply(cities, first_and_last)</code></pre>
<pre><code>##       New York Paris London Tokyo
## first &quot;e&quot;      &quot;a&quot;   &quot;d&quot;    &quot;k&quot;  
## last  &quot;Y&quot;      &quot;s&quot;   &quot;o&quot;    &quot;y&quot;</code></pre>
</div>
<div id="vapply" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> vapply</h2>
<blockquote>
<p>RECAP:</p>
</blockquote>
<ul>
<li><code>lapply()</code></li>
<li>apply function over list or vector</li>
<li>output = list</li>
<li><code>sapply()</code></li>
<li>apply function over list or vector</li>
<li><strong>try to simplify</strong> list to array</li>
<li><code>vapply()</code></li>
<li>apply function over list or vector</li>
<li><strong>explicitly specify</strong> output format</li>
</ul>
<blockquote>
<p>vapply(X, FUN, FUN.VALUE, … USE.NAMES = TRUE)</p>
</blockquote>
<pre class="r"><code>sapply(cities, nchar)</code></pre>
<pre><code>## New York    Paris   London    Tokyo 
##        8        5        6        5</code></pre>
<pre class="r"><code>vapply(cities, nchar, FUN.VALUE = numeric(1))</code></pre>
<pre><code>## New York    Paris   London    Tokyo 
##        8        5        6        5</code></pre>
<pre class="r"><code>vapply(cities, first_and_last, FUN.VALUE = character(2))</code></pre>
<pre><code>##       New York Paris London Tokyo
## first &quot;e&quot;      &quot;a&quot;   &quot;d&quot;    &quot;k&quot;  
## last  &quot;Y&quot;      &quot;s&quot;   &quot;o&quot;    &quot;y&quot;</code></pre>
<pre class="r"><code>#vapply(cities, first_and_last, FUN.VALUE = character(1))</code></pre>
</div>
</div>
<div id="utilities" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Utilities</h1>
<div id="useful-functions" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Useful Functions</h2>
<ul>
<li><code>abs()</code></li>
<li><code>round()</code></li>
<li><code>sum()</code></li>
<li><code>mean()</code></li>
<li><code>seq()</code></li>
<li><code>rep( each != times )</code></li>
<li><code>sort()</code></li>
<li><code>is.*()</code></li>
<li><code>as.*()</code></li>
<li><code>unlist()</code> -&gt; vector</li>
<li><code>append()</code></li>
<li><code>rev()</code></li>
</ul>
</div>
<div id="regular-expressions" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Regular
Expressions</h2>
<ul>
<li>Sequence of (meta)characters</li>
<li>Pattern existence</li>
<li>Pattern replacement</li>
<li>Pattern extraction</li>
<li><code>grep()</code>, <code>grepl()</code></li>
<li><code>sub()</code>, <code>gsub()</code></li>
</ul>
<blockquote>
<p>grepl(pattern = <regex>, x = &lt;string)</p>
</blockquote>
<pre class="r"><code>animals &lt;- c(&quot;cat&quot;, &quot;moose&quot;,&quot;impala&quot;,&quot;ant&quot;,&quot;kiwi&quot;)
grepl(pattern = &quot;a&quot;,x = animals)</code></pre>
<pre><code>## [1]  TRUE FALSE  TRUE  TRUE FALSE</code></pre>
<pre class="r"><code>grep(pattern = &quot;a&quot;,x = animals)</code></pre>
<pre><code>## [1] 1 3 4</code></pre>
<pre class="r"><code>which(grepl(pattern = &quot;a&quot;,x = animals))</code></pre>
<pre><code>## [1] 1 3 4</code></pre>
<pre class="r"><code>grepl(pattern = &quot;^a&quot;,x = animals) #start with</code></pre>
<pre><code>## [1] FALSE FALSE FALSE  TRUE FALSE</code></pre>
<pre class="r"><code>grepl(pattern = &quot;a$&quot;,x = animals) #end with</code></pre>
<pre><code>## [1] FALSE FALSE  TRUE FALSE FALSE</code></pre>
<blockquote>
<p>sub(pattern = <regex>, replacement = <str>, x = <str>)</p>
</blockquote>
<pre class="r"><code>sub(pattern = &quot;a&quot;,replacement = &quot;o&quot;,x = animals) #first match only</code></pre>
<pre><code>## [1] &quot;cot&quot;    &quot;moose&quot;  &quot;impola&quot; &quot;ont&quot;    &quot;kiwi&quot;</code></pre>
<pre class="r"><code>gsub(pattern = &quot;a&quot;,replacement = &quot;o&quot;,x = animals) #match all</code></pre>
<pre><code>## [1] &quot;cot&quot;    &quot;moose&quot;  &quot;impolo&quot; &quot;ont&quot;    &quot;kiwi&quot;</code></pre>
<pre class="r"><code>gsub(pattern = &quot;a|i&quot;,replacement = &quot;_&quot;,x = animals) #match all &#39;a&#39; or &#39;i&#39;</code></pre>
<pre><code>## [1] &quot;c_t&quot;    &quot;moose&quot;  &quot;_mp_l_&quot; &quot;_nt&quot;    &quot;k_w_&quot;</code></pre>
<pre class="r"><code>gsub(pattern = &quot;a|i|o&quot;,replacement = &quot;_&quot;,x = animals) #match all &#39;a&#39; or &#39;i&#39;</code></pre>
<pre><code>## [1] &quot;c_t&quot;    &quot;m__se&quot;  &quot;_mp_l_&quot; &quot;_nt&quot;    &quot;k_w_&quot;</code></pre>
<p>But there’s more that can be added to make the pattern more
robust:</p>
<p><code>@</code>, because a valid email must contain an at-sign.
<code>.*</code>, which matches any character (.) zero or more times (*).
Both the dot and the asterisk are metacharacters. You can use them to
match any character between the at-sign and the “.edu” portion of an
email address. <code>\\.edu$</code>, to match the “.edu” part of the
email at the end of the string. The \ part escapes the dot: it tells R
that you want to use the . as an actual character.</p>
<pre class="r"><code># The emails vector has already been defined for you
emails &lt;- c(&quot;john.doe@ivyleague.edu&quot;, &quot;education@world.gov&quot;, &quot;dalai.lama@peace.org&quot;,
            &quot;invalid.edu&quot;, &quot;quant@bigdatacollege.edu&quot;, &quot;cookie.monster@sesame.tv&quot;)

# Use grepl() to match for .edu addresses more robustly
grepl(pattern = &quot;@.*\\.edu$&quot;,x = emails)</code></pre>
<pre><code>## [1]  TRUE FALSE FALSE FALSE  TRUE FALSE</code></pre>
<pre class="r"><code># Use grep() to match for .edu addresses more robustly, save result to hits
hits &lt;- grep(pattern = &quot;@.*\\.edu$&quot;,x = emails)

# Subset emails using hits
emails[hits]</code></pre>
<pre><code>## [1] &quot;john.doe@ivyleague.edu&quot;   &quot;quant@bigdatacollege.edu&quot;</code></pre>
<pre class="r"><code># Use sub() to convert the email domains to datacamp.edu
sub(pattern=&quot;@.*\\.edu$&quot;,replacement=&quot;@datacamp.edu&quot;,x=emails)</code></pre>
<pre><code>## [1] &quot;john.doe@datacamp.edu&quot;    &quot;education@world.gov&quot;     
## [3] &quot;dalai.lama@peace.org&quot;     &quot;invalid.edu&quot;             
## [5] &quot;quant@datacamp.edu&quot;       &quot;cookie.monster@sesame.tv&quot;</code></pre>
<p><code>.*</code>: A usual suspect! It can be read as “any character
that is matched zero or more times”. <code>\\s</code>: Match a space.
The “s” is normally a character, escaping it (\) makes it a
metacharacter. <code>[0-9]+</code>: Match the numbers 0 to 9, at least
once (+). <code>([0-9]+)</code>: The parentheses are used to make parts
of the matching string available to define the replacement. The
<code>\\1</code> in the replacement argument of sub() gets set to the
string that is captured by the regular expression
<code>[0-9]+</code>.</p>
</div>
<div id="times-dates" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Times &amp;
Dates</h2>
<pre class="r"><code>today &lt;- Sys.Date()
today</code></pre>
<pre><code>## [1] &quot;2023-04-12&quot;</code></pre>
<pre class="r"><code>class(today)</code></pre>
<pre><code>## [1] &quot;Date&quot;</code></pre>
<pre class="r"><code>now &lt;- Sys.time()
now</code></pre>
<pre><code>## [1] &quot;2023-04-12 17:46:25 -03&quot;</code></pre>
<pre class="r"><code>class(now)</code></pre>
<pre><code>## [1] &quot;POSIXct&quot; &quot;POSIXt&quot;</code></pre>
<pre class="r"><code>my_date &lt;- as.Date(&quot;1971-05-14&quot;)
my_date</code></pre>
<pre><code>## [1] &quot;1971-05-14&quot;</code></pre>
<pre class="r"><code>unclass(my_date) #JAN 1st 1970</code></pre>
<pre><code>## [1] 498</code></pre>
<pre class="r"><code>class(my_date)</code></pre>
<pre><code>## [1] &quot;Date&quot;</code></pre>
<pre class="r"><code>my_date &lt;- as.Date(&quot;1971-14-05&quot;,format=&quot;%Y-%d-%m&quot;)
my_date</code></pre>
<pre><code>## [1] &quot;1971-05-14&quot;</code></pre>
<pre class="r"><code>my_date + 1</code></pre>
<pre><code>## [1] &quot;1971-05-15&quot;</code></pre>
<pre class="r"><code>my_date2 &lt;- as.Date(&quot;1998-09-29&quot;)

my_date2 - my_date</code></pre>
<pre><code>## Time difference of 10000 days</code></pre>
<pre class="r"><code>my_time &lt;- as.POSIXct(&quot;1971-05-14 11:25:15 UTC&quot;)
my_time</code></pre>
<pre><code>## [1] &quot;1971-05-14 11:25:15 -03&quot;</code></pre>
<pre class="r"><code>my_time + 1</code></pre>
<pre><code>## [1] &quot;1971-05-14 11:25:16 -03&quot;</code></pre>
<pre class="r"><code>my_time2 &lt;- as.POSIXct(&quot;1974-07-14 21:11:55 UTC&quot;)

my_time2 - my_time</code></pre>
<pre><code>## Time difference of 1157.407 days</code></pre>
<blockquote>
<p>ISO: YYYY-mm-dd</p>
</blockquote>
<p>Dedicated R Packages:</p>
<ul>
<li>lubridate</li>
<li>zoo</li>
<li>xts</li>
</ul>
<pre class="r"><code># Definition of character strings representing dates
str1 &lt;- &quot;May 23, &#39;96&quot;
str2 &lt;- &quot;2012-03-15&quot;
str3 &lt;- &quot;30/January/2006&quot;

# Convert the strings to dates: date1, date2, date3
date1 &lt;- as.Date(str1, format = &quot;%b %d, &#39;%y&quot;)
date2 &lt;- as.Date(str2, format = &quot;%Y-%m-%d&quot;)
date3 &lt;- as.Date(str3, format = &quot;%d/%B/%Y&quot;)

# Convert dates to formatted strings
format(date1, &quot;%A&quot;)</code></pre>
<pre><code>## [1] NA</code></pre>
<pre class="r"><code>format(date2, &quot;%d&quot;)</code></pre>
<pre><code>## [1] &quot;15&quot;</code></pre>
<pre class="r"><code>format(date3, &quot;%b %Y&quot;)</code></pre>
<pre><code>## [1] NA</code></pre>
<pre class="r"><code># Definition of character strings representing times
str1 &lt;- &quot;May 23, &#39;96 hours:23 minutes:01 seconds:45&quot;
str2 &lt;- &quot;2012-3-12 14:23:08&quot;

# Convert the strings to POSIXct objects: time1, time2
time1 &lt;- as.POSIXct(str1, format = &quot;%B %d, &#39;%y hours:%H minutes:%M seconds:%S&quot;)
time2 &lt;- as.POSIXct(str2, format = &quot;%Y-%m-%d %H:%M:%S&quot;)

# Convert times to formatted strings
format(time1, &quot;%M&quot;)</code></pre>
<pre><code>## [1] NA</code></pre>
<pre class="r"><code>format(time2, &quot;%I:%M %p&quot;)</code></pre>
<pre><code>## [1] &quot;02:23 &quot;</code></pre>
<hr />
<p>This code was last compiled at 2023-04-12 17:46:25</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
